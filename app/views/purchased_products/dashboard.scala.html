@this(main_template: views.html.main_template, form: uk.gov.hmrc.play.views.html.helpers.FormWithCSRF)
@(journeyData: JourneyData,
  alcoholPurchasedItemList: List[PurchasedItem],
  tobaccoPurchasedItemList: List[PurchasedItem],
  otherGoodsPurchasedItemList: List[PurchasedItem],
  showCalculate: Boolean
)(implicit request: Request[_], messages: Messages)

@import uk.gov.hmrc.play.views.html._

@main_template(title = messages("label.tell_us_about_your_purchases"), bodyClasses = None) {

  <h1 class="heading-xlarge">@messages("label.tell_us_about_your_purchases")</h1>

  <h2 class="heading-large">@messages("label.your_details")</h2>

  <dl class="govuk-check-your-answers cya-questions-short">
    <div>
      <dt class="cya-question">@messages("label.private_aircraft_or_private_boat")</dt>
      <dd class="cya-answer">@{if(journeyData.privateCraft.getOrElse("None") == true) messages("label.yes") else messages("label.no")}</dd>
      <dd class="cya-answer cya-change"><a href="private-travel" role="text">@messages("label.change") <span class="visually-hidden">@messages("label.private_aircraft_or_private_boat")</span></a></dd>
    </div>
    <div>
      <dt class="cya-question">@messages("label.17_or_over")</dt>
      <dd class="cya-answer">@{if(journeyData.ageOver17.getOrElse("None") == true) messages("label.yes") else messages("label.no")}</dd>
      <dd class="cya-answer cya-change"><a href="confirm-age" role="text">@messages("label.change") <span class="visually-hidden">@messages("label.17_or_over")</span></a></dd>
    </div>
  </dl>

  <h2 class="heading-large">@messages("label.your_purchases")</h2>

  <div class="panel panel-border-wide" id="panel">
    <p>@messages("label.add_purchases_separately_")</p>
  </div>

  <div class="alcohol">
    <h3 class="heading-medium">@messages("label.alcohol")</h3>

    @if(alcoholPurchasedItemList.isEmpty){
      <p class="border-bottom">
        <a href="products/alcohol" class="add">@messages("label.add_alcohol")</a>
      </p>
    } else {

      <div class="add-more">
        <a href="products/alcohol" class="add">@messages("label.add_alcohol")</a>
      </div>

      @alcoholPurchasedItemList.map { purchasedItem =>
        <dl class="govuk-check-your-answers cya-questions-short margin-bottom-15">
          <div class="product-item">
            <dt class="cya-question">@messages("label.item")</dt>
            <dd class="cya-answer">@purchasedItem.description</dd>
            <dd class="cya-answer cya-change"><a href="@routes.AlcoholInputController.displayVolumeUpdate(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change") <span class="visually-hidden">@purchasedItem.description</span></a></dd>
          </div>
          <div class="product-country">
            <dt class="cya-question">@messages("label.country")</dt>
            <dd class="cya-answer">@purchasedItem.country</dd>
            <dd class="cya-answer cya-change"><a href="@routes.AlcoholInputController.displayCountryUpdate(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change") <span class="visually-hidden">@purchasedItem.description @messages("label.country")</span></a></dd>
          </div>
          <div class="product-price">
            <dt class="cya-question">@messages("label.price")</dt>
            <dd class="cya-answer">@purchasedItem.purchasedProductInstance.cost @purchasedItem.displayCurrency</dd>
            <dd class="cya-answer cya-change"><a href="@routes.AlcoholInputController.displayCurrencyUpdate(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change") <span class="visually-hidden">@purchasedItem.description @messages("label.price")</span></a></dd>
          </div>
        </dl>
        <div class="margin-bottom-50">
          <a href="@routes.AlterProductsController.confirmRemove(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.remove_this_item") <span class="visually-hidden">@purchasedItem.description</span></a>
        </div>
      }
    }

  </div>

  <div class="tobacco">

    <h3 class="heading-medium">@messages("label.tobacco")</h3>

    @if(tobaccoPurchasedItemList.isEmpty){
      <p class="border-bottom">
        <a href="products/tobacco" class="add">@messages("label.add_tobacco")</a>
      </p>
    } else {

      <div class="add-more">
        <a href="products/tobacco" class="add">@messages("label.add_tobacco")</a>
      </div>

      @tobaccoPurchasedItemList.map { purchasedItem =>
        <dl class="govuk-check-your-answers cya-questions-short margin-bottom-15">
          <div class="product-item">
            <dt class="cya-question">@messages("label.item")</dt>
            <dd class="cya-answer">
              @if(purchasedItem.displayWeight){
                @messages("suffix.comma", purchasedItem.description.get) @purchasedItem.displayWeight
              } else {
                @purchasedItem.description
              }
            </dd>
            <dd class="cya-answer cya-change"><a href="@routes.TobaccoInputController.updateNoOfSticksAndWeight(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change") <span class="visually-hidden">
              @if(purchasedItem.displayWeight){
                @messages("suffix.comma", purchasedItem.description.get) @purchasedItem.displayWeight
              } else {
                @purchasedItem.description
              }</span></a></dd>
          </div>
          <div class="product-country">
            <dt class="cya-question">@messages("label.country")</dt>
            <dd class="cya-answer">@purchasedItem.country</dd>
            <dd class="cya-answer cya-change"><a href="@routes.TobaccoInputController.displayCountryUpdate(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change")<span class="visually-hidden">
              @if(purchasedItem.displayWeight){
                @messages("suffix.comma", purchasedItem.description.get) @purchasedItem.displayWeight
              } else {
                @purchasedItem.description
              } @messages("label.country")</span></a></dd>

          </div>
          <div class="product-price">
            <dt class="cya-question">@messages("label.price")</dt>
            <dd class="cya-answer">@purchasedItem.purchasedProductInstance.cost @purchasedItem.displayCurrency</dd>
            <dd class="cya-answer cya-change"><a href="@routes.TobaccoInputController.displayCurrencyUpdate(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change")<span class="visually-hidden">
              @if(purchasedItem.displayWeight){
                @messages("suffix.comma", purchasedItem.description.get) @purchasedItem.displayWeight
              } else {
                @purchasedItem.description
              } @messages("label.price")</span></a></dd>
          </div>
        </dl>
        <div class="margin-bottom-50">
          <a href="@routes.AlterProductsController.confirmRemove(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.remove_this_item") <span class="visually-hidden">
              @if(purchasedItem.displayWeight){
                @messages("suffix.comma", purchasedItem.description.get) @purchasedItem.displayWeight
              } else {
                @purchasedItem.description
              }</span></a>
        </div>
      }
    }

  </div>


  <div class="other-goods">
    <h3 class="heading-medium">@messages("label.other_goods")</h3>

    @if(otherGoodsPurchasedItemList.isEmpty){
      <p class="border-bottom">
        <a href="products/other-goods" class="add">@messages("label.add_other_goods")</a>
      </p>
    } else {

      <div class="add-more">
        <a href="products/other-goods" class="add">@messages("label.add_other_goods")</a>
      </div>

      @otherGoodsPurchasedItemList.map { purchasedItem =>
        <dl class="govuk-check-your-answers cya-questions-short margin-bottom-15">
          <div class="product-item">
            <dt class="cya-question">@messages("label.item")</dt>
            <dd class="cya-answer">@purchasedItem.description</dd>
          </div>
          <div class="product-country">
            <dt class="cya-question">@messages("label.country")</dt>
            <dd class="cya-answer">@purchasedItem.country</dd>
            <dd class="cya-answer cya-change"><a href="@routes.OtherGoodsInputController.displayCountryUpdate(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change") <span class="visually-hidden">@purchasedItem.description @messages("label.country")</span></a></dd>
          </div>
          <div class="product-price">
            <dt class="cya-question">@messages("label.price")</dt>
            <dd class="cya-answer">
              @purchasedItem.purchasedProductInstance.cost
              @purchasedItem.displayCurrency
            </dd>
            <dd class="cya-answer cya-change"><a href="@routes.OtherGoodsInputController.displayCurrencyUpdate(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.change") <span class="visually-hidden">@purchasedItem.description @messages("label.price")</span></a></dd>
          </div>
        </dl>
        <div class="margin-bottom-50">
          <a href="@routes.AlterProductsController.confirmRemove(purchasedItem.purchasedProductInstance.path, purchasedItem.purchasedProductInstance.iid)" role="text">@messages("label.remove_this_item") <span class="visually-hidden">@purchasedItem.description</span></a>
        </div>
      }
    }

  </div>

  @if(showCalculate) {
    @form(action = routes.DashboardController.calculate()) {
      <button type="submit" class="margin-top-30">Calculate</button>
    }
  }

  <p class="margin-top-30">
    <a href="@controllers.routes.TravelDetailsController.newSession()" id="start-again" >@messages("label.start_again")</a>.
  </p>
}

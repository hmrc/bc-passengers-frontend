@*
 * Copyright 2024 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import views.ViewUtils._
@import util._

@this(
    govukLayout: templates.GovukLayoutWrapper,
    h1: components.h1,
    h2: components.h2,
    p: components.p,
    warning: components.warning,
    button: components.button,
    formHelper: FormWithCSRF
)

@(totalEnteredAmount: String, originalAmountEntered:String, userInput:String, token: String, productName: String)(implicit request: Request[_], messages: Messages, appConfig: config.AppConfig)

@p1Alcohol = {
    @p(
        Html(
            messages(
                "limitExceeded.p1.edit.alcohol",
                originalAmountEntered,
                messages(s"limitExceeded.unit.${token}"),
                userInput
            )
        )
    )
}

@p1Tobacco = {
    @p(
        Html(
            messages(
                "limitExceeded.p1.edit.tobacco",
                originalAmountEntered,
                messages(s"limitExceeded.unit.${token}"),
                userInput
            )
        )
    )
}

@p1LooseTobacco = {
    @p(
        Html(
            messages(
                "limitExceeded.p1.edit.loose.tobacco",
                originalAmountEntered,
                messages(s"limitExceeded.unit.${token}"),
                userInput
            )
        )
    )
}

@p2Alcohol = {
    @p(
        Html(
            messages(
            "limitExceeded.p2.edit.alcohol",
            totalEnteredAmount,
            messages(s"limitExceeded.unit.${token}")
            )
        )
    )
}

@p2Tobacco = {
    @p(
        Html(
            messages(
                "limitExceeded.p2.edit.tobacco",
                totalEnteredAmount,
                messages(s"limitExceeded.unit.${token}")
            )
        )
    )
}

@p2LooseTobacco = {
    @p(
        Html(
            messages(
            "limitExceeded.p2.edit.loose.tobacco",
            totalEnteredAmount,
            messages(s"limitExceeded.unit.${token}")
            )
        )
    )
}

@p3Alcohol = {
@p(
Html(
messages("limitExceeded.p3.edit.alcohol", messages(s"limitExceeded.max.limit.${token}"))
)
)
}

@p3Tobacco = {
@p(
Html(
messages("limitExceeded.p3.edit.tobacco", messages(s"limitExceeded.max.limit.${token}"))
)
)
}

@p3LooseTobacco = {
@p(
Html(
messages("limitExceeded.p3.edit.loose.tobacco", messages(s"limitExceeded.max.limit.${token}"))
))
}

@p4Alcohol = {
@p(
Html(
messages(
"limitExceeded.p4.edit.alcohol",
originalAmountEntered.toString,
messages(s"limitExceeded.unit.${token}")
)
)
)
}

@p4Tobacco = {
@p(
Html(
messages(
"limitExceeded.p4.edit.tobacco",
originalAmountEntered.toString,
messages(s"limitExceeded.unit.${token}")
)
)
)
}

@p4LooseTobacco = {
@p(
Html(
messages(
"limitExceeded.p4.edit.loose.tobacco",
originalAmountEntered.toString,
messages(s"limitExceeded.unit.${token}")
)
)
)
}

@p1Content = {

    @if(productName.contains("alcohol")) {
        @p1Alcohol
    } else if(token == "rolling-tobacco" || token == "chewing-tobacco") {
        @p1LooseTobacco
    } else {
        @p1Tobacco
    }
}

@p2Content = {

    @if(productName.contains("alcohol")) {
        @p2Alcohol
    } else if(token == "rolling-tobacco" || token == "chewing-tobacco") {
        @p2LooseTobacco
    } else {
        @p2Tobacco
    }
}

@p3Content = {

    @if(productName.contains("alcohol")) {
        @p3Alcohol
    } else if(token == "rolling-tobacco" || token == "chewing-tobacco") {
        @p3LooseTobacco
    } else {
        @p3Tobacco
    }
}

@p4Content = {

    @if(productName.contains("alcohol")) {
        @p4Alcohol
    } else if(token == "rolling-tobacco" || token == "chewing-tobacco") {
        @p4LooseTobacco
    } else {
        @p4Tobacco
    }
}


@govukLayout(pageTitle = Some(messages("limitExceeded.title")  + " - " + messages("service.name") + " - " + messages("site.govuk"))) {

    @h1(messages("limitExceeded.h1"))

    @p1Content

    @p2Content

    @p3Content

    @p4Content

    @h2(messages("limitExceeded.h2a"), id = Some("what-you-must-do"))

    @p(Html(messages("limitExceeded.p4")))

    @if(productName.contains("alcohol")) {
        @warning(Html(messages("limitExceeded.warning.alcohol")))
    } else {
        @warning(Html(messages("limitExceeded.warning.tobacco")))
    }

    @h2(messages("limitExceeded.h2b"))

    @p(Html(messages("limitExceeded.p5")))

    @formHelper(action = routes.SelectProductController.nextStep) {
        @button(messages("label.continue"))
    }
}
